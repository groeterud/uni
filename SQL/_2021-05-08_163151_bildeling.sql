/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

CREATE DATABASE /*!32312 IF NOT EXISTS*/ bildeling /*!40100 DEFAULT CHARACTER SET utf8mb4 */;
USE bildeling;

DROP TABLE IF EXISTS bil;
CREATE TABLE `bil` (
  `Regnr` char(8) NOT NULL,
  `Merke` char(20) NOT NULL,
  `Modell` char(20) NOT NULL,
  `Startdato` date DEFAULT NULL,
  `Posisjon` varchar(60) NOT NULL,
  PRIMARY KEY (`Regnr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

DROP TABLE IF EXISTS kunde;
CREATE TABLE `kunde` (
  `Mobilnr` char(8) NOT NULL,
  `Fornavn` char(20) NOT NULL,
  `Etternavn` char(20) NOT NULL,
  `Betalingskortnr` char(12) NOT NULL,
  PRIMARY KEY (`Mobilnr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

DROP TABLE IF EXISTS utleie;
CREATE TABLE `utleie` (
  `Regnr` char(8) NOT NULL,
  `Utlevert` timestamp NOT NULL,
  `KmUt` int NOT NULL,
  `Mobilnr` char(8) DEFAULT NULL,
  `Innlevert` timestamp NULL DEFAULT NULL,
  `kmInn` int DEFAULT NULL,
  `Belop` decimal(8,2) DEFAULT NULL,
  PRIMARY KEY (`Regnr`,`Utlevert`),
  KEY `UtleieKundeFK` (`Mobilnr`),
  CONSTRAINT `UtleieBilFK` FOREIGN KEY (`Regnr`) REFERENCES `bil` (`Regnr`),
  CONSTRAINT `UtleieKundeFK` FOREIGN KEY (`Mobilnr`) REFERENCES `kunde` (`Mobilnr`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;




INSERT INTO bil(Regnr,Merke,Modell,Startdato,Posisjon) VALUES('AX88775','Kovacek','Avensis','2021-05-08','39.0346, -45.3685'),('SV11324','Mercedez','E250','2018-04-01','111.5460, -44.9528'),('SV32875','Hagenes Inc','Derplord','2020-10-01','-76.6890, 3.2198');

INSERT INTO kunde(Mobilnr,Fornavn,Etternavn,Betalingskortnr) VALUES('11111111','Tore','Bilese','111122223333'),('57065559','Hilbert','Yost','12505510'),('81893542','Cassandra','Bradtke','68963701'),('88157833','Efren','Heaney','78874224');
INSERT INTO utleie(Regnr,Utlevert,KmUt,Mobilnr,Innlevert,kmInn,Belop) VALUES('AX88775','2020-06-15 16:06:01',125000,'88157833','2020-06-18 16:06:01',12750,1750.50),('AX88775','2021-05-07 08:00:15',135000,'81893542','2021-05-07 15:15:15',142000,1250.90),('AX88775','2021-05-08 15:24:05',145000,'81893542',NULL,NULL,NULL),('SV11324','2020-04-20 13:37:13',10000,'57065559','2020-06-01 16:06:11',18000,3575.50),('SV11324','2020-06-15 16:06:01',18000,'81893542','2020-06-18 16:06:01',22000,1250.50),('SV11324','2021-05-01 01:05:30',22000,'81893542',NULL,NULL,NULL),('SV32875','2020-06-15 16:06:01',180000,'57065559','2020-06-18 16:06:01',195000,1750.50);







/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
